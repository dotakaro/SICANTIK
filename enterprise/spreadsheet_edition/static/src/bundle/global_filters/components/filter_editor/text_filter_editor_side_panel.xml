<?xml version="1.0" encoding="utf-8"?>
<templates>
    <div t-name="spreadsheet_edition.TextFilterEditorSidePanel" class="o_spreadsheet_filter_editor_side_panel">
        <Section title.translate="Label">
            <TextInput
                placeholder="store.labelPlaceholder"
                class="'o_global_filter_label' + (store.missingLabelError ? ' o_field_invalid' : '')"
                value="store.filter.label"
                onChange.bind="setLabel"
                autofocus="true"
            />
        </Section>
        <Section title.translate="Filter value">
            <div class="o-section-subtitle">Default value</div>
            <TextFilterValue
                value="store.filter.defaultValue ?? []"
                options="store.textOptions"
                onValueChanged.bind="updateDefaultValue"
            />
            <div class="o-section-subtitle mt-4">Possible values</div>
            <Checkbox
                className="'restrict_to_range mb-1'"
                label.translate="Restrict values to ranges"
                onChange.bind="toggleRangeRestriction"
                value="state.rangeRestriction"
            />
            <SelectionInput
                t-if="state.rangeRestriction"
                ranges="store.rangesForSelectionInput"
                required="true"
                onSelectionChanged.bind="onRangeChanged"
                onSelectionConfirmed.bind="onRangeConfirmed"
            />
        </Section>
        <t t-if="store.shouldDisplayFieldMatching">
            <SidePanelCollapsible isInitiallyCollapsed="!store.isNew" title.translate="Field matching">
                <t t-set-slot="content">
                    <Section class="'pt-0'">
                        <FilterEditorFieldMatching
                            fieldMatchings="store.fieldsMatching"
                            selectField.bind="store.updateFieldMatching"
                            filterModelFieldSelectorField.bind="filterModelFieldSelectorField"
                            sortModelFieldSelectorFields.bind="sortModelFieldSelectorFields"
                        />
                    </Section>
                </t>
            </SidePanelCollapsible>
        </t>
        <div class="o-section o-sidePanelButtons">
            <t t-call="spreadsheet_edition.FilterEditorButtons">
                <t t-set="onDelete" t-value="this.props.id and onDelete.bind(this)" />
                <t t-set="onSave" t-value="onSave.bind(this)" />
                <t t-set="onCancel" t-value="onCancel.bind(this)" />
            </t>
        </div>
    </div>
</templates>
