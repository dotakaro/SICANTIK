<?xml version="1.0" encoding="UTF-8" ?>
<templates>
    <t t-name="knowledge.KnowledgeTopbar">
        <div class="o_knowledge_header d-flex flex-wrap flex-md-nowrap d-print-none bg-view px-0 py-2 px-sm-2">
            <div class="d-flex flex-wrap flex-md-nowrap flex-grow-1 gap-1 px-2 px-sm-0 pt-2 pt-sm-0 align-items-center min-w-0">
                <a role="button" class="o_knowledge_toggle_sidebar d-md-none btn btn-light align-self-start px-2 py-1" t-on-click="() => this.env.toggleAsideMobile()">
                    <i class="oi oi-lg oi-panel-right" title="Toggle aside menu"/>
                </a>
                <t t-if="props.record.resId">
                    <KnowledgeHierarchy record="props.record"/>
                    <i t-if="this.props.record.data.is_locked" class="fa fa-fw fa-lock me-2" title="This article is locked" />
                    <t t-if="props.record.data.active and !props.record.data.is_locked and props.record.data.user_can_write">
                        <KnowledgeFormStatusIndicator model="props.record.model" save="env.save" discard="env.discard"/>
                    </t>
                </t>
            </div>
            <div t-if="props.record.resId" class="d-flex gap-1 flex-md-nowrap mx-auto justify-content-end">
                <button t-if="props.record.data.active" t-attf-class="btn btn-light #{state.shareBtnIsActive ? 'show' : ''}" t-on-click="togglePermissionPanel" data-hotkey="shift+s">
                    <t t-if="isInternalUser">Share</t>
                    <t t-else="">Members</t>
                </button>
                <a t-if="isInternalUser" role="button" t-attf-class="btn btn-light btn-chatter #{chatterPanelState.isDisplayed ? 'active' : ''}" data-hotkey="d" t-on-click="() => chatterPanelState.isDisplayed = !chatterPanelState.isDisplayed"
                    t-att-title="chatterButtonTitle">
                    <i class="fa fa-fw fs-6 fa-comments-o"/>
                </a>
                <a t-if="propertiesPanelState.isDisplayed or props.record.data.article_properties.some((prop) => !prop.definition_deleted)" role="button" t-attf-class="btn btn-light btn-properties #{propertiesPanelState.isDisplayed ? 'active' : ''}" data-hotkey="o" title="Show Properties" t-on-click="() => this.propertiesPanelState.isDisplayed = !this.propertiesPanelState.isDisplayed">
                    <i class="fa fa-fw fs-6 fa-cogs"/>
                </a>
                <a t-ref="btn_comments" t-if="displayCommentsPanelButton" role="button"
                    t-attf-class="btn btn-light btn-comments #{commentsState.displayMode === 'panel' ? 'active' : ''}" t-on-click="toggleComments"
                    t-att-title="commentButtonTitle">
                    <i class="fa fa-fw fs-6 fa-commenting-o"/>
                </a>
                <a role="button" class="btn btn-light o_knowledge_toggle_favorite" t-on-click="env.toggleFavorite" data-hotkey="t" t-att-title="props.record.data.is_user_favorite ? removeFavoriteLabel : addFavoriteLabel">
                    <i class="fa fa-fw fs-4 fa-star" t-if="props.record.data.is_user_favorite"/>
                    <i class="fa fa-fw fs-4 fa-star-o" t-if="!props.record.data.is_user_favorite"/>
                </a>
                <OptionsDropdown record="this.props.record"/>
            </div>
        </div>
    </t>
</templates>
