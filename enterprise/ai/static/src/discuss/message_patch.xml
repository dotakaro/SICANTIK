<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-inherit="mail.Message" t-inherit-mode="extension">
        <xpath expr="//*[hasclass('o-mail-Message-contentContainer')]" position="attributes">
            <attribute name="t-att-class"></attribute>
            <attribute name="t-attf-class" add="{{ props.thread?.channel_type === 'ai_composer' and props.isInChatWindow ? 'flex-column' : '' }}" separator=" "/>
            <attribute name="t-attf-class" add="{{ props.thread?.channel_type !== 'ai_composer' and isAlignedRight ? 'flex-row-reverse' : '' }}" separator=" "/>
        </xpath>
        <xpath expr="//*[hasclass('o-mail-Message-textContent')]" position="attributes">
            <attribute name="t-attf-class" add="{{ props.thread?.channel_type === 'ai_composer' and !props.isInChatWindow ? 'flex-column' : '' }}" separator=" "/>
        </xpath>
    </t>
    <t t-inherit="mail.Message.actions" t-inherit-mode="extension">
        <xpath expr="//*[hasclass('o-mail-Message-actions')]" position="attributes">
            <attribute name="t-attf-class" add="{{ props.thread?.channel_type === 'ai_composer' and isAlignedRight ? 'flex-row-reverse' : '' }}" separator=" "/>
            <attribute name="t-attf-class" add="{{ props.thread?.channel_type === 'ai_composer' ? 'ms-0' : '' }}" separator=" "/>
        </xpath>
        <xpath expr="//button" position="attributes">
            <attribute name="class" remove="border-0" separator=" "/>
            <attribute name="t-attf-class" add="{{ ['insertToComposer', 'send-message-direct', 'log-note-direct'].includes(action.id) ? 'rounded-1 border-2 btn-secondary me-1' : 'border-0' }}" separator=" "/>
        </xpath>
        <xpath expr="//button" position="inside">
            <span class="px-2" t-if="action.id === 'insertToComposer'">Use this</span>
            <span class="px-2" t-if="action.id === 'send-message-direct'">Send Message</span>
            <span class="px-2" t-if="action.id === 'log-note-direct'">Log Note</span>
        </xpath>
    </t>
</templates>
